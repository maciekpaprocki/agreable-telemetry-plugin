!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Telemetry=e()}}(function(){var e;return function e(t,r,n){function a(i,l){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return a(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(t,r,n){!function(t,a){if("function"==typeof e&&e.amd)e([],a);else if("object"==typeof n){var o=a();"object"==typeof r&&r&&r.exports&&(n=r.exports=o),n.randomColor=o}else t.randomColor=a()}(this,function(){function e(e){var t=o(e.hue),r=s(t);return r<0&&(r=360+r),r}function t(e,t){if("random"===t.luminosity)return s([0,100]);if("monochrome"===t.hue)return 0;var r=i(e),n=r[0],a=r[1];switch(t.luminosity){case"bright":n=55;break;case"dark":n=a-10;break;case"light":a=55}return s([n,a])}function r(e,t,r){var n=a(e,t),o=100;switch(r.luminosity){case"dark":o=n+20;break;case"light":n=(o+n)/2;break;case"random":n=0,o=100}return s([n,o])}function n(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return h(e);case"hsl":var r=h(e);return"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)";case"hsla":var n=h(e);return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+Math.random()+")";case"rgbArray":return d(e);case"rgb":var a=d(e);return"rgb("+a.join(", ")+")";case"rgba":var o=d(e);return"rgba("+o.join(", ")+", "+Math.random()+")";default:return u(e)}}function a(e,t){for(var r=l(e).lowerBounds,n=0;n<r.length-1;n++){var a=r[n][0],o=r[n][1],i=r[n+1][0],s=r[n+1][1];if(t>=a&&t<=i){var u=(s-o)/(i-a),c=o-u*a;return u*t+c}}return 0}function o(e){if("number"==typeof parseInt(e)){var t=parseInt(e);if(t<360&&t>0)return[t,t]}if("string"==typeof e&&y[e]){var r=y[e];if(r.hueRange)return r.hueRange}return[0,360]}function i(e){return l(e).saturationRange}function l(e){e>=334&&e<=360&&(e-=360);for(var t in y){var r=y[t];if(r.hueRange&&e>=r.hueRange[0]&&e<=r.hueRange[1])return y[t]}return"Color not found"}function s(e){if(null===p)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var t=e[1]||1,r=e[0]||0;p=(9301*p+49297)%233280;var n=p/233280;return Math.floor(r+n*(t-r))}function u(e){function t(e){var t=e.toString(16);return 1==t.length?"0"+t:t}var r=d(e),n="#"+t(r[0])+t(r[1])+t(r[2]);return n}function c(e,t,r){var n=r[0][0],a=r[r.length-1][0],o=r[r.length-1][1],i=r[0][1];y[e]={hueRange:t,lowerBounds:r,saturationRange:[n,a],brightnessRange:[o,i]}}function f(){c("monochrome",null,[[0,0],[100,0]]),c("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),c("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),c("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),c("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),c("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),c("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),c("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function d(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var r=e[1]/100,n=e[2]/100,a=Math.floor(6*t),o=6*t-a,i=n*(1-r),l=n*(1-o*r),s=n*(1-(1-o)*r),u=256,c=256,f=256;switch(a){case 0:u=n,c=s,f=i;break;case 1:u=l,c=n,f=i;break;case 2:u=i,c=n,f=s;break;case 3:u=i,c=l,f=n;break;case 4:u=s,c=i,f=n;break;case 5:u=n,c=i,f=l}var d=[Math.floor(255*u),Math.floor(255*c),Math.floor(255*f)];return d}function h(e){var t=e[0],r=e[1]/100,n=e[2]/100,a=(2-r)*n;return[t,Math.round(r*n/(a<1?a:2-a)*1e4)/100,a/2*100]}function m(e){for(var t=0,r=0;r!==e.length&&!(t>=Number.MAX_SAFE_INTEGER);r++)t+=e.charCodeAt(r);return t}var p=null,y={};f();var v=function(a){if(a=a||{},a.seed&&a.seed===parseInt(a.seed,10))p=a.seed;else if("string"==typeof a.seed)p=m(a.seed);else{if(void 0!==a.seed&&null!==a.seed)throw new TypeError("The seed value must be an integer or string");p=null}var o,i,l;if(null!==a.count&&void 0!==a.count){var s=a.count,u=[];for(a.count=null;s>u.length;)p&&a.seed&&(a.seed+=1),u.push(v(a));return a.count=s,u}return o=e(a),i=t(o,a),l=r(o,i,a),n([o,i,l],a)};return v})},{}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("randomcolor"),l=n(i),s=function(){function e(){return a(this,e),!!$("body").hasClass("telemetry_page_telemetry-calendar")&&void this.insertDependencies()}return o(e,[{key:"insertDependencies",value:function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.1.0/fullcalendar.min.css";var t=document.getElementsByTagName("link")[0];t.parentNode.insertBefore(e,t),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.2/sweetalert.min.js");var r=document.createElement("link");r.rel="stylesheet",r.href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css",t.parentNode.insertBefore(r,t),this.initialize()}},{key:"initialize",value:function(){$("#acf-group_agreable_telemetry_calendar .acf-fields").append($('<div id="calendar" />')),this.initCalendar()}},{key:"refreshData",value:function(e,t){var r=$("#calendar").fullCalendar("getDate").format("YYYY-MM-DD"),n=moment(r).subtract(1,"months").date(1).format("YYYY-MM-DD"),a=moment(r).add(2,"months").date(0).format("YYYY-MM-DD");$.ajax({url:telemetry_config.endpoint+"/api/v1/team/"+telemetry_config.team_id+"/acquisitions?api_token="+telemetry_config.token+"&start="+n+"&end="+a,success:function(e){e.acquisitions.map(function(e){e.backgroundColor=(0,l.default)({luminosity:"light",seed:e.title})}),$("#calendar").fullCalendar("renderEvents",e.acquisitions)}})}},{key:"initCalendar",value:function(){var e=this;$("#calendar").fullCalendar({eventClick:function(t){e.getAcquisitionInformation(t.id)},viewRender:function(t,r){e.refreshData(t,r)}})}},{key:"getAcquisitionInformation",value:function(e){$.ajax({url:telemetry_config.endpoint+"/api/v1/acquisitions/"+e+"/promotion/metadata?api_token="+telemetry_config.token,success:function(e){sweetAlert({title:'<span style="color:#000">'+e.title+"</span>",text:'<ul style="color:#000;text-align:left;"><li><b>URL:</b> <a href="'+e.url+'">'+e.url+"</a></li><li><b>Entries:</b> "+e.totalEntries+"</li>"+(e.corrects?"<li><b>Correct entries:</b> "+e.corrects+"</li>":"")+"<li><b>New subscribers:</b> "+e.newSubscribers+"</li></ul>",html:!0,type:"info"})},error:function(){sweetAlert({title:'<span style="color:#000">There was a problem getting the data for this promotion</span>',text:'<p style="color:#000">Something went a bit wrong, but we\'re not sure what. Drop us an email at <a href="mailto:jon.sherrard@shortlist.com">jon.sherrard@shortlist.com</a> and we\'ll take a look into it for you.</p>',html:!0,type:"error"})}})}}]),e}();r.default=s},{randomcolor:1}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){var t=this;n(this,e);var r=$("#wp-admin-bar-promo-downloads");if(r.length<1)return!1;$.getScript("https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.2/sweetalert.min.js").done(function(){r.on("click","a",t.handleClick.bind(t))});var a=document.createElement("link");a.rel="stylesheet",a.href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css";var o=document.getElementsByTagName("link")[0];o.parentNode.insertBefore(a,o)}return a(e,[{key:"handleClick",value:function(e){var t=this;e.preventDefault(),$.ajax({url:e.currentTarget.href,success:function(e){200===e.status?t.showSuccessModal(e.data.password):t.showErrorModal()},error:function(e){t.showErrorModal()}})}},{key:"showSuccessModal",value:function(e){sweetAlert({title:'<span style="color:#000">Your download request was successful!</span>',text:'<p style="color:#000">You\'ll get an email to say it\'s ready. Please make a note of this password as you\'ll need it to open the file:</p><p style="margin-top:20px;color:#000">'+e+"</p>",html:!0,type:"success"})}},{key:"showErrorModal",value:function(){sweetAlert({title:'<span style="color:#000">There was a problem with your download request!</span>',text:'<span style="color:#000">Something went a bit wrong, but we\'re not sure what. Drop us an email at <a href="mailto:jon.sherrard@shortlist.com">jon.sherrard@shortlist.com</a> and we\'ll take a look into it for you.</span>',html:!0,type:"warning"})}}]),e}();r.default=o},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=e("./AgreableTelemetryDataExport"),o=n(a),i=e("./AgreableTelemetryCalendar"),l=n(i);window.$=window.$||jQuery||window.jQuery,window.onload=function(){new o.default,new l.default}},{"./AgreableTelemetryCalendar":2,"./AgreableTelemetryDataExport":3}]},{},[4])(4)});